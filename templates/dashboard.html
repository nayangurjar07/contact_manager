<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Contact Manager</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #F1F8E9; 
            margin: 0;
        }
        .sidebar-green { 
            background-color: #C8E6C9; 
        }
        .table-row-hover:hover { 
            background-color: #F9FDF9; 
            transition: all 0.2s ease-in-out; 
        }
        .avatar-circle { 
            background-color: #A5D6A7; 
            color: #1B5E20; 
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        /* Fixed: Standard CSS for shadows to avoid VS Code warnings */
        .card-container {
            background-color: white;
            border-radius: 2.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid #f1f5f9;
        }
    </style>
</head>
<body class="flex min-h-screen">

    <aside class="w-64 sidebar-green hidden md:flex flex-col shadow-inner">
        <div class="p-8 flex items-center gap-3">
            <div class="bg-white p-2 rounded-xl shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#2E7D32]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
            </div>
            <span class="text-xl font-extrabold text-slate-800 tracking-tight">Contacts</span>
        </div>

        <nav class="mt-8 flex-grow px-4 space-y-2">
            <a href="/" class="flex items-center gap-3 px-5 py-3 bg-white rounded-2xl text-[#2E7D32] font-bold shadow-sm">
                Dashboard
            </a>
            <a href="/add_contact" class="flex items-center gap-3 px-5 py-3 text-slate-700 hover:bg-white/40 rounded-2xl transition-all">
                Add New Contact
            </a>
        </nav>

        <div class="p-8 border-t border-black/5">
            <a href="/logout" class="flex items-center gap-2 text-slate-600 font-bold hover:text-red-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
                Logout
            </a>
        </div>
    </aside>

    <main class="flex-grow p-6 md:p-12">
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12">
            <div>
                <h1 class="text-4xl font-black text-slate-800 tracking-tight">My Contacts</h1>
                <p class="text-slate-500 font-medium">Monitoring {{ contacts|length }} entries</p>
            </div>
            <a href="/add_contact" class="px-6 py-3 bg-[#2E7D32] text-white font-bold rounded-2xl shadow-lg hover:bg-[#1B5E20] transition-all flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                </svg>
                New Contact
            </a>
        </header>

        <div class="card-container overflow-hidden">
            <table class="w-full text-left border-collapse">
                <thead class="bg-[#F9FDF9] text-slate-400 text-xs font-bold uppercase tracking-widest border-b border-slate-50">
                    <tr>
                        <th class="px-8 py-5">Name</th>
                        <th class="px-8 py-5">Phone</th>
                        <th class="px-8 py-5">Email</th>
                        <th class="px-8 py-5 text-right">Action</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-50">
                    {% for c in contacts %}
                    <tr class="table-row-hover">
                        <td class="px-8 py-5">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 avatar-circle rounded-full text-sm">
                                    {{ c[1][0]|upper }}
                                </div>
                                <span class="font-bold text-slate-800">{{ c[1] }}</span>
                            </div>
                        </td>
                        <td class="px-8 py-5 font-medium text-slate-600">{{ c[2] }}</td>
                        <td class="px-8 py-5 font-medium text-slate-600">{{ c[3] }}</td>
                        <td class="px-8 py-5 text-right">
                            <div class="flex justify-end gap-4">
                                <a href="/edit_contact/{{ c[0] }}" class="text-[#2E7D32] font-bold hover:underline transition-all">Edit</a>
                                <a href="/delete_contact/{{ c[0] }}" 
                                   onclick="return confirm('Remove this contact?')" 
                                   class="text-red-400 font-bold hover:text-red-600 transition-colors">Delete</a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            {% if not contacts %}
            <div class="p-20 text-center">
                <p class="text-slate-400 font-medium italic text-lg">Your contact list is empty.</p>
                <a href="/add_contact" class="text-[#2E7D32] font-bold mt-2 inline-block hover:underline">Add your first contact â†’</a>
            </div>
            {% endif %}
        </div>
    </main>

</body>
</html>